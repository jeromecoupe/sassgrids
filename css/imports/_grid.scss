// -------------------------------------
// =grid: general silent classes
// -------------------------------------

// use negative margins to reset margins on nested grids
%grid-nested
{
    margin:auto (-($gutter / 2));
}

// - 1. grid modules are 100% by default (you have to specify desired width in all media queries, otherwise it will not work)
// - 2. allows for paddings using pixels and rems
// - 3. gutters created using padding
// - 4. using inline-block to stack the modules side by side (comment out white space in html)
// - 5. align top of modules

%grid-module
{
    width:100%;                         // [1]
    @include box-sizing(border-box);    // [2]
    padding:0 ($gutter / 2);            // [3]
    display:inline-block;               // [4]
    vertical-align:top;                 // [5]
}


// -------------------------------------
// =grid: main mixin (defining grid proportions)
// -------------------------------------

@mixin maingrid($namespace:"")
{
    // add dash at the end of namespace to construct classnames
    @if ($namespace != "")
    {
        $namespace: "#{$namespace}-";
    }

    %#{$namespace}span-full            { width:100%; }

    %#{$namespace}span-1of2            { width:50%; }

    %#{$namespace}span-1of3            { width:33.333%; }
    %#{$namespace}span-2of3            { width:66.666%; }

    %#{$namespace}span-1of4            { width:25%; }
    %#{$namespace}span-2of4            { @extend %#{$namespace}span-1of2; }
    %#{$namespace}span-3of4            { width:75%; }

    %#{$namespace}span-1of5            { width:20%; }
    %#{$namespace}span-2of5            { width:40%; }
    %#{$namespace}span-3of5            { width:60%; }
    %#{$namespace}span-4of5            { width:80%; }

    %#{$namespace}span-1of6            { width:16.666%; }
    %#{$namespace}span-2of6            { @extend %#{$namespace}span-1of2; }
    %#{$namespace}span-3of6            { @extend %#{$namespace}span-1of3; }
    %#{$namespace}span-4of6            { @extend %#{$namespace}span-2of3; }
    %#{$namespace}span-5of6            { width:83.333%; }

    %#{$namespace}span-1of8            { width:12.5%; }
    %#{$namespace}span-2of8            { @extend %#{$namespace}span-1of4; }
    %#{$namespace}span-3of8            { width:37.5%; }
    %#{$namespace}span-4of8            { @extend %#{$namespace}span-1of2; }
    %#{$namespace}span-5of8            { width:62.5%; }
    %#{$namespace}span-6of8            { @extend %#{$namespace}span-3of4; }
    %#{$namespace}span-7of8            { width:87.5%; }

    %#{$namespace}span-1of10            { width:10%; }
    %#{$namespace}span-2of10            { @extend %#{$namespace}span-1of5; }
    %#{$namespace}span-3of10            { width:30%; }
    %#{$namespace}span-4of10            { @extend %#{$namespace}span-2of5; }
    %#{$namespace}span-5of10            { @extend %#{$namespace}span-1of2; }
    %#{$namespace}span-6of10            { @extend %#{$namespace}span-3of5; }
    %#{$namespace}span-7of10            { width:70%; }
    %#{$namespace}span-8of10            { @extend %#{$namespace}span-4of5; }
    %#{$namespace}span-9of10            { width:90%; }

    %#{$namespace}span-1of12            { width:8.333%; }
    %#{$namespace}span-2of12            { @extend %#{$namespace}span-1of6; }
    %#{$namespace}span-3of12            { @extend %#{$namespace}span-1of4; }
    %#{$namespace}span-4of12            { @extend %#{$namespace}span-1of3; }
    %#{$namespace}span-5of12            { width:41.666% }
    %#{$namespace}span-6of12            { @extend %#{$namespace}span-1of2; }
    %#{$namespace}span-7of12            { width:58.333%; }
    %#{$namespace}span-8of12            { @extend %#{$namespace}span-2of3; }
    %#{$namespace}span-9of12            { @extend %#{$namespace}span-3of4; }
    %#{$namespace}span-10of12           { @extend %#{$namespace}span-5of6; }
    %#{$namespace}span-11of12           { width:91.666%; }
}


// -------------------------------------
// =add push classes
// -------------------------------------
// * using relative positioning and left positions to proportionnaly nudge things to the left
// * combined with pull classes, these allow for more complex content choreography
@mixin pushclasses($namespace:"")
{
    // add dash at the end of namespace to construct classnames
    @if ($namespace != "")
    {
        $namespace: "#{$namespace}-";
    }

    %#{$namespace}push-full            { position:relative; left:100%; }

    %#{$namespace}push-1of2            { position:relative; left:50%; }

    %#{$namespace}push-1of3            { position:relative; left:33.333%; }
    %#{$namespace}push-2of3            { position:relative; left:66.666%; }

    %#{$namespace}push-1of4            { position:relative; left:25%; }
    %#{$namespace}push-2of4            { @extend %#{$namespace}push-1of2; }
    %#{$namespace}push-3of4            { position:relative; left:75%; }

    %#{$namespace}push-1of5            { position:relative; left:20%; }
    %#{$namespace}push-2of5            { position:relative; left:40%; }
    %#{$namespace}push-3of5            { position:relative; left:60%; }
    %#{$namespace}push-4of5            { position:relative; left:80%; }

    %#{$namespace}push-1of6            { position:relative; left:16.666%; }
    %#{$namespace}push-2of6            { @extend %#{$namespace}push-1of2; }
    %#{$namespace}push-3of6            { @extend %#{$namespace}push-1of3; }
    %#{$namespace}push-4of6            { @extend %#{$namespace}push-2of3; }
    %#{$namespace}push-5of6            { position:relative; left:83.333%; }

    %#{$namespace}push-1of8            { position:relative; left:12.5%; }
    %#{$namespace}push-2of8            { @extend %#{$namespace}push-1of4; }
    %#{$namespace}push-3of8            { position:relative; left:37.5%; }
    %#{$namespace}push-4of8            { @extend %#{$namespace}push-1of2; }
    %#{$namespace}push-5of8            { position:relative; left:62.5%; }
    %#{$namespace}push-6of8            { @extend %#{$namespace}push-3of4; }
    %#{$namespace}push-7of8            { position:relative; left:87.5%; }

    %#{$namespace}push-1of10            { position:relative; left:10%; }
    %#{$namespace}push-2of10            { @extend %#{$namespace}push-1of5; }
    %#{$namespace}push-3of10            { position:relative; left:30%; }
    %#{$namespace}push-4of10            { @extend %#{$namespace}push-2of5; }
    %#{$namespace}push-5of10            { @extend %#{$namespace}push-1of2; }
    %#{$namespace}push-6of10            { @extend %#{$namespace}push-3of5; }
    %#{$namespace}push-7of10            { position:relative; left:70%; }
    %#{$namespace}push-8of10            { @extend %#{$namespace}push-4of5; }
    %#{$namespace}push-9of10            { position:relative; left:90%; }

    %#{$namespace}push-1of12            { position:relative; left:8.333%; }
    %#{$namespace}push-2of12            { @extend %#{$namespace}push-1of6; }
    %#{$namespace}push-3of12            { @extend %#{$namespace}push-1of4; }
    %#{$namespace}push-4of12            { @extend %#{$namespace}push-1of3; }
    %#{$namespace}push-5of12            { position:relative; left:41.666% }
    %#{$namespace}push-6of12            { @extend %#{$namespace}push-1of2; }
    %#{$namespace}push-7of12            { position:relative; left:58.333%; }
    %#{$namespace}push-8of12            { @extend %#{$namespace}push-2of3; }
    %#{$namespace}push-9of12            { @extend %#{$namespace}push-3of4; }
    %#{$namespace}push-10of12           { @extend %#{$namespace}push-5of6; }
    %#{$namespace}push-11of12           { position:relative; left:91.666%; }
}


// -------------------------------------
// =add pull classes
// -------------------------------------
// * using relative positioning and right positions to proportionnaly nudge things to the right
// * combined with push classes, these allow for more complex content choreography
@mixin pullclasses($namespace:"")
{
    @if ($namespace != "")
    {
        $namespace: $namespace + "-";
    }

    %#{$namespace}pull-full            { position:relative; right:100%; }

    %#{$namespace}pull-1of2            { position:relative; right:50%; }

    %#{$namespace}pull-1of3            { position:relative; right:33.333%; }
    %#{$namespace}pull-2of3            { position:relative; right:66.666%; }

    %#{$namespace}pull-1of4            { position:relative; right:25%; }
    %#{$namespace}pull-2of4            { @extend %#{$namespace}pull-1of2; }
    %#{$namespace}pull-3of4            { position:relative; right:75%; }

    %#{$namespace}pull-1of5            { position:relative; right:20%; }
    %#{$namespace}pull-2of5            { position:relative; right:40%; }
    %#{$namespace}pull-3of5            { position:relative; right:60%; }
    %#{$namespace}pull-4of5            { position:relative; right:80%; }

    %#{$namespace}pull-1of6            { position:relative; right:16.666%; }
    %#{$namespace}pull-2of6            { @extend %#{$namespace}pull-1of2; }
    %#{$namespace}pull-3of6            { @extend %#{$namespace}pull-1of3; }
    %#{$namespace}pull-4of6            { @extend %#{$namespace}pull-2of3; }
    %#{$namespace}pull-5of6            { position:relative; right:83.333%; }

    %#{$namespace}pull-1of8            { position:relative; right:12.5%; }
    %#{$namespace}pull-2of8            { @extend %#{$namespace}pull-1of4; }
    %#{$namespace}pull-3of8            { position:relative; right:37.5%; }
    %#{$namespace}pull-4of8            { @extend %#{$namespace}pull-1of2; }
    %#{$namespace}pull-5of8            { position:relative; right:62.5%; }
    %#{$namespace}pull-6of8            { @extend %#{$namespace}pull-3of4; }
    %#{$namespace}pull-7of8            { position:relative; right:87.5%; }

    %#{$namespace}pull-1of10            { position:relative; right:10%; }
    %#{$namespace}pull-2of10            { @extend %#{$namespace}pull-1of5; }
    %#{$namespace}pull-3of10            { position:relative; right:30%; }
    %#{$namespace}pull-4of10            { @extend %#{$namespace}pull-2of5; }
    %#{$namespace}pull-5of10            { @extend %#{$namespace}pull-1of2; }
    %#{$namespace}pull-6of10            { @extend %#{$namespace}pull-3of5; }
    %#{$namespace}pull-7of10            { position:relative; right:70%; }
    %#{$namespace}pull-8of10            { @extend %#{$namespace}pull-4of5; }
    %#{$namespace}pull-9of10            { position:relative; right:90%; }

    %#{$namespace}pull-1of12            { position:relative; right:8.333%; }
    %#{$namespace}pull-2of12            { @extend %#{$namespace}pull-1of6; }
    %#{$namespace}pull-3of12            { @extend %#{$namespace}pull-1of4; }
    %#{$namespace}pull-4of12            { @extend %#{$namespace}pull-1of3; }
    %#{$namespace}pull-5of12            { position:relative; right:41.666% }
    %#{$namespace}pull-6of12            { @extend %#{$namespace}pull-1of2; }
    %#{$namespace}pull-7of12            { position:relative; right:58.333%; }
    %#{$namespace}pull-8of12            { @extend %#{$namespace}pull-2of3; }
    %#{$namespace}pull-9of12            { @extend %#{$namespace}pull-3of4; }
    %#{$namespace}pull-10of12           { @extend %#{$namespace}pull-5of6; }
    %#{$namespace}pull-11of12           { position:relative; right:91.666%; }
}


// -------------------------------------
// =export grid in all media-queries
// -------------------------------------
// In SASS, you cannot extend classes that are not in the same media queries / context
// * The code belows generate silent classes for all the defined media queries breakpoints
// * These media-queries and silent classes are generated in a mobile-first order
// * The breakpoints you define in _variables.scss should follow that modile-first pattern

// include silent classes without any media queries
@include maingrid();
@if ($use-push-classes == true) { @include pushclasses(); }
@if ($use-pull-classes == true) { @include pullclasses(); }

// inlude silent classes in all breakpoint defined media-queries
@each $breakpoint in $breakpoints
{
    $namespace: nth($breakpoint, 1);

    @if ($namespace != "")
    {
        @include mq($namespace)
        {
            @include maingrid("#{$namespace}");
            @if ($use-push-classes == true) { @include pushclasses("#{$namespace}"); }
            @if ($use-pull-classes == true) { @include pullclasses("#{$namespace}"); }
        }
    }
    @else
    {
        @warn "media queries namespaces not defined";
    }
}